<?xml version="1.0" encoding="utf-8" ?>
<Patch>
  <Operation Class="PatchOperationAdd">
	  <xpath>Defs/ThingDef[defName = "Muffalo"]/comps</xpath>
      <value>
        <li Class="ProcessorFramework.CompProperties_Processor">
          <showProductIcon>true</showProductIcon>
          <barOffset>(0.0, 0.25)</barOffset>
          <barScale>(1.0, 1.0)</barScale>
          <independentProcesses>true</independentProcesses>
          <parallelProcesses>true</parallelProcesses>
          <colorCoded>false</colorCoded>
          <capacity>25</capacity>
          <processes>
            <li>Beer</li>
            <li>Test</li>
          </processes>
        </li>
      </value>
	</Operation>
  
  <!-- Soft-removes normal fermenting barrel -->
	<Operation Class="PatchOperationRemove">
	  <xpath>Defs/ThingDef[defName = "FermentingBarrel"]/designationCategory</xpath>
	</Operation>

	<!-- Instead of removing the WorkGiver class gets replaced so it doesn't scan the map anymore -->
	<Operation Class="PatchOperationReplace">
	  <xpath>Defs/WorkGiverDef[defName = "TakeBeerOutOfFermentingBarrel" or defName = "FillFermentingBarrel"]/giverClass</xpath>
		<value>
			<giverClass>WorkGiver_DoBill</giverClass>
		</value>
	</Operation>

	<!-- Allow Brewery to be made of stuff -->
	<Operation Class="PatchOperationConditional">
    <xpath>Defs/ThingDef[defName="Brewery"]/costList/WoodLog</xpath>
    <match Class="PatchOperationRemove">
			<xpath>Defs/ThingDef[defName="Brewery"]/costList/WoodLog</xpath>
    </match>
  </Operation>

	<Operation Class="PatchOperationConditional">
    <xpath>Defs/ThingDef[defName="Brewery"]/constructEffect</xpath>
    <match Class="PatchOperationRemove">
			<xpath>Defs/ThingDef[defName="Brewery"]/constructEffect</xpath>
    </match>
  </Operation>
	
	<Operation Class="PatchOperationConditional">
    <xpath>Defs/ThingDef[defName="Brewery"]/costStuffCount</xpath>
    <nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="Brewery"]</xpath>
			<value>
				<costStuffCount>120</costStuffCount>
			</value>
    </nomatch>
		<match Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[defName="Brewery"]/costStuffCount</xpath>
			<value>
				<costStuffCount>120</costStuffCount>
			</value>
    </match>
  </Operation>

	<Operation Class="PatchOperationConditional">
    <xpath>Defs/ThingDef[defName="Brewery"]/stuffCategories</xpath>
    <nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="Brewery"]</xpath>
			<value>
				<stuffCategories>
					<li>Woody</li>
				</stuffCategories>
			</value>
    </nomatch>
		<match Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[defName="Brewery"]/stuffCategories</xpath>
			<value>
				<stuffCategories>
					<li>Woody</li>
				</stuffCategories>
			</value>
    </match>
  </Operation>
  
</Patch>